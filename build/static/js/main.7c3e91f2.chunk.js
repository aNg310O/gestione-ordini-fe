(this["webpackJsonpapp-ordini-fe"]=this["webpackJsonpapp-ordini-fe"]||[]).push([[0],{173:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),s=n.n(r),c=n(16),o=n.n(c),i=n(41),l=n(20),u=n(21),d=n(32),j=n(26),b=n(25),h=n(18),O=(n(173),n(45)),m=n.n(O),g="https://heroku-be-gestione-ordini.herokuapp.com/api/auth/",p=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"login",value:function(e,t){return m.a.post(g+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,n){return m.a.post(g+"signup",{username:e,email:t,password:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),f=n(81),x=n.n(f),v=n(61),y=n.n(v),k=n(82),C=n.n(k),N=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},S=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",password:"",loading:!1,message:""},a}return Object(u.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?p.login(this.state.username,this.state.password).then((function(){t.props.history.push("/"),window.location.reload()}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:n})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(x.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[N]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(y.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[N]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"btn btn-primary btn-block",disabled:this.state.loading,children:[this.state.loading&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(a.jsx)("span",{children:"Login"})]})}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(C.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(r.Component);function w(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var I="https://heroku-be-gestione-ordini.herokuapp.com/api/test/",P=new(function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"getPublicContent",value:function(){return m.a.get(I+"all")}},{key:"getUserBoard",value:function(){return m.a.get(I+"user",{headers:w()})}},{key:"getModeratorBoard",value:function(){return m.a.get(I+"mod",{headers:w()})}},{key:"getAdminBoard",value:function(){return m.a.get(I+"admin",{headers:w()})}}]),e}()),D=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;P.getPublicContent().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:this.state.content})})})}}]),n}(r.Component),U=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={redirect:null,userReady:!1,currentUser:{username:""}},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=p.getCurrentUser();e||this.setState({redirect:"/"}),this.setState({currentUser:e,userReady:!0})}},{key:"render",value:function(){if(this.state.redirect)return Object(a.jsx)(h.a,{to:this.state.redirect});var e=this.state.currentUser;return Object(a.jsx)("div",{className:"container",children:this.state.userReady?Object(a.jsxs)("div",{children:[Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("strong",{children:e.username})," Profile"]})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(a.jsx)("strong",{children:"Authorities:"}),Object(a.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})]}):null})}}]),n}(r.Component),T=n(11),L=m.a.create({baseURL:"https://heroku-be-gestione-ordini.herokuapp.com/",responseType:"json"}),R=n(304),E=n(306),F=n(308),A=n(278),q=Object(R.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function B(){var e=q();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(E.a,{position:"static",style:{backgroundColor:"#2196F3"},children:Object(a.jsx)(F.a,{children:Object(a.jsx)(A.a,{variant:"h6",className:e.title,children:"Pagina ordini"})})})})}var M=n(321),_=n(322),z=n(311),V=n(319),G=n(318),H=n(323),J=n(315),W=n(51),Y=n.n(W),K=n(324),Q=n(316),$=n(320),X=n(309),Z=n(35),ee=n.n(Z),te=n(53),ne=(n(70),p.getCurrentUser()),ae=function(e){var t=Object(r.useState)([]),n=Object(T.a)(t,2),s=n[0],c=n[1];Object(r.useEffect)((function(){o()}),[e.trig]);var o=function(){var e=Object(te.a)(ee.a.mark((function e(){var t,n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ROLE_ADMIN"!==ne.roles[0]){e.next=7;break}return e.next=3,L.get("/gestione-ordini/ordine/all",{headers:w()});case 3:t=e.sent,c(t.data),e.next=11;break;case 7:return e.next=9,L.get("/gestione-ordini/ordini/".concat(ne.username),{headers:w()});case 9:n=e.sent,c(n.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{id:"ordini",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["data inserimento","venditore","desc","qty","peso totale","note","operation"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e.id,n=e.desc,r=e.qty,o=e.pesoTotale,i=e.dataInserimento,l=e.seller,u=e.note;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:i}),Object(a.jsx)("td",{children:l}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:u}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){L.delete("gestione-ordini/ordine/".concat(e),{headers:w()}).then((function(t){var n=s.filter((function(t){return e!==t.id}));c(n)}))}(t)},children:"Delete"})})]},t)}))})]})})},re=Object(R.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function se(){var e=re(),t=Object(r.useState)([]),n=Object(T.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)([""]),i=Object(T.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)("none"),j=Object(T.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)("none"),m=Object(T.a)(O,2),g=m[0],f=m[1],x=Object(r.useState)(0),v=Object(T.a)(x,2),y=v[0],k=v[1],C=Object(r.useState)(""),N=Object(T.a)(C,2),S=N[0],I=N[1],P=Object(r.useState)(!1),D=Object(T.a)(P,2),U=D[0],R=D[1],E=Object(r.useState)(""),F=Object(T.a)(E,2),A=F[0],q=F[1],W=Object(r.useState)(0),Z=Object(T.a)(W,2),ee=Z[0],te=Z[1],ne=Object(r.useState)(""),se=Object(T.a)(ne,2),ce=se[0],oe=se[1],ie=Object(r.useState)(0),le=Object(T.a)(ie,2),ue=le[0],de=le[1],je=Object(r.useState)(!1),be=Object(T.a)(je,2),he=be[0],Oe=be[1],me=Object(r.useState)("none"),ge=Object(T.a)(me,2),pe=ge[0],fe=ge[1],xe=Object(r.useState)(!1),ve=Object(T.a)(xe,2),ye=ve[0],ke=ve[1],Ce=Object(r.useState)("none"),Ne=Object(T.a)(Ce,2),Se=Ne[0],we=Ne[1],Ie=Object(r.useState)("teal"),Pe=Object(T.a)(Ie,2),De=Pe[0],Ue=Pe[1],Te=p.getCurrentUser();Object(r.useEffect)((function(){Le()}),[]);var Le=function(){L.get("gestione-ordini/prodotti",{headers:w()}).then((function(e){200===e.status&&c(e.data)})).catch((function(e){401===e.response.status?(Ue("red"),I("La tua sessione \xe8 scaduta. Fai logout/login!"),R(!0)):403===e.response.status?(Ue("red"),I("No token provided. Fai logout/login!"),R(!0)):(Ue("red"),I(e.message),R(!0))}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)(B,{}),Object(a.jsx)(X.a,{control:Object(a.jsx)($.a,{checked:he,onChange:function(e){Oe(e.target.checked),e.target.checked?fe("block"):fe("none")},name:"checkedA",color:"primary"}),label:"Inserisci ordini"}),Object(a.jsxs)(G.a,{display:pe,className:e.root,children:[Object(a.jsxs)(z.a,{className:e.formControl,children:[Object(a.jsx)(M.a,{id:"demo-simple-select-label",children:"Prodotti"}),Object(a.jsxs)(V.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l.desc,onChange:function(e){2!==e.target.value?(u(e.target.value||""),h("block"),f("none"),te(0),oe(""),q(""),de(0),k(0)):(u(e.target.value||""),h("none"),f("block"),te(0),oe(""),q(""),de(0),k(0))},children:[s&&s.map((function(e){return Object(a.jsx)(_.a,{value:e,children:e.desc},e.desc)})),Object(a.jsx)(_.a,{value:2,children:"Custom"},"custom")]})]}),Object(a.jsxs)(G.a,{display:b,className:e.root,children:[Object(a.jsx)(H.a,{label:"Prodotto",style:{backgroundColor:"#D4D4D4"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:l.desc}),Object(a.jsx)(H.a,{label:"Grammatura (gr)",style:{backgroundColor:"#D4D4D4"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:l.grammatura}),Object(a.jsx)(H.a,{label:"Peso Totale (gr)",style:{backgroundColor:"#D4D4D4"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:l.pesoTotale*y}),Object(a.jsx)(H.a,{label:"Inserisci qui l'ordine",margin:"none",onChange:function(e){return k(e.target.value)},value:y,type:"number",defaultValue:"0",variant:"outlined",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(H.a,{label:"Note",value:ce,onChange:function(e){return oe(e.target.value)},margin:"none",type:"string",defaultValue:"",variant:"outlined"}),Object(a.jsx)(J.a,{onClick:function(){return function(e,t){if(0!==y){var n={desc:e.desc,seller:Te.username,pesoProdotto:e.pesoTotale,qty:y,note:t,isCustom:!1};L.post("gestione-ordini/ordine/",n,{headers:w()}).then((function(e){200===e.status&&(Ue("green"),I("Ordine inserito!"),R(!0))})).catch((function(e){401===e.response.status?(Ue("red"),I("La tua sessione \xe8 scaduta. Fai logout/login!"),R(!0)):403===e.response.status?(Ue("red"),I("No token provided. Fai logout/login!"),R(!0)):(Ue("red"),I(e.message),R(!0))}))}else I("L'ordine non pu\xf2 essere vuoto..."),R(!0)}(l,ce)},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center","margin-top":"10px"},startIcon:Object(a.jsx)(Y.a,{}),variant:"outlined",children:"Inserisci l'ordine"})]}),Object(a.jsxs)(G.a,{display:g,className:e.root,children:[Object(a.jsx)(H.a,{required:!0,value:A,margin:"none",onChange:function(e){return q(e.target.value)},type:"string",defaultValue:"",variant:"outlined",label:"Nome prodotto"}),Object(a.jsx)(H.a,{required:!0,value:ue,margin:"none",onChange:function(e){return de(e.target.value)},type:"number",defaultValue:"0",variant:"outlined",label:"Peso totale(gr)",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(H.a,{required:!0,value:ee,margin:"none",onChange:function(e){return te(e.target.value)},type:"number",defaultValue:"0",variant:"outlined",label:"Quantit\xe0(pezzi)",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(H.a,{value:ce,margin:"none",onChange:function(e){return oe(e.target.value)},type:"string",defaultValue:"",variant:"outlined",label:"Note"}),Object(a.jsx)(J.a,{onClick:function(){return function(e,t,n,a){if(0!==n){var r={desc:e,seller:Te.username,pesoProdotto:t,qty:n,note:a,isCustom:!0};L.post("gestione-ordini/ordine/",r,{headers:w()}).then((function(e){200===e.status&&(Ue("green"),I("Ordine custom inserito!"),R(!0))})).catch((function(e){401===e.response.status?(Ue("red"),I("La tua sessione \xe8 scaduta. Fai logout/login!"),R(!0)):403===e.response.status?(Ue("red"),I("No token provided. Fai logout/login!"),R(!0)):(Ue("red"),I(e.message),R(!0))}))}else I("L'ordine non pu\xf2 essere vuoto..."),R(!0)}(A,ue,ee,ce)},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Y.a,{}),variant:"outlined",children:"Inserisci l'ordine personalizzato"})]})]}),Object(a.jsx)(K.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:U,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&R(!1)},children:Object(a.jsx)(Q.a,{style:{backgroundColor:De},message:S})}),Object(a.jsx)("br",{}),Object(a.jsx)(X.a,{control:Object(a.jsx)($.a,{checked:ye,onChange:function(e){ke(e.target.checked),e.target.checked?we("block"):we("none")},name:"checkedB",color:"primary"}),label:"Rivedi/modifica l'ordine inserito"}),Object(a.jsx)(G.a,{display:Se,className:e.root,children:Object(a.jsx)(ae,{trig:ye})})]})}var ce=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;P.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)(se,{})}}]),n}(r.Component),oe=Object(R.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function ie(){var e=oe();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(E.a,{position:"static",style:{backgroundColor:"#2196F3"},children:Object(a.jsx)(F.a,{children:Object(a.jsx)(A.a,{variant:"h6",className:e.title,children:"Pagina Admin"})})})})}var le=p.getCurrentUser(),ue=function(e){var t=Object(r.useState)([]),n=Object(T.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(""),i=Object(T.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(!1),j=Object(T.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)("teal"),m=Object(T.a)(O,2),g=m[0],p=m[1];Object(r.useEffect)((function(){f()}),[e.trigP]);var f=function(){L.get("/gestione-ordini/prodotti/",{headers:w()}).then((function(e){200===e.status&&"ROLE_ADMIN"===le.roles[0]&&c(e.data)})).catch((function(e){401===e.response.status?(p("red"),u("La tua sessione \xe8 scaduta. Fai logout/login!"),h(!0)):403===e.response.status?(p("red"),u("No token provided. Fai logout/login!"),h(!0)):(p("red"),u(e.message),h(!0))}))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{id:"styled-table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","grammatura","peso totale","operation"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e.id,n=e.desc,r=e.grammatura,o=e.pesoTotale;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){L.delete("gestione-ordini/prodotto/".concat(e),{headers:w()}).then((function(t){var n=s.filter((function(t){return e!==t.id}));c(n)}))}(t)},children:"Delete"})})]},t)}))})]}),Object(a.jsx)(K.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:b,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&h(!1)},children:Object(a.jsx)(Q.a,{style:{backgroundColor:g},message:l})})]})},de=p.getCurrentUser(),je=function(e){var t=Object(r.useState)([]),n=Object(T.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)("teal"),i=Object(T.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(""),j=Object(T.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)(!1),m=Object(T.a)(O,2),g=m[0],p=m[1];Object(r.useEffect)((function(){f()}),[e.trigU]);var f=function(){var e=Object(te.a)(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ROLE_ADMIN"!==de.roles[0]){e.next=5;break}return e.next=3,L.get("/api/user/findUser",{headers:w()});case 3:200===(t=e.sent).status?c(t.data):401===t.status&&console.log("Token scaduto!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{id:"users",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["username","email","operation"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e.id,n=e.username,r=e.email;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){e===de.username?(h("Non puoi rimuovere te stesso..."),u("orange"),p(!0)):L.delete("api/user/deleteUser/".concat(e),{headers:w()}).then((function(t){var n=s.filter((function(t){return e!==t.username}));c(n)}))}(n)},children:"Delete"})})]},t)}))})]}),Object(a.jsx)(K.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:g,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&p(!1)},children:Object(a.jsx)(Q.a,{style:{backgroundColor:l},message:b})})]})},be=n(73),he=(n(126),p.getCurrentUser()),Oe=function(e){var t=Object(r.useState)([]),n=Object(T.a)(t,2),s=n[0],c=n[1];Object(r.useEffect)((function(){o()}),[e.trigR]);var o=function(){var e=Object(te.a)(ee.a.mark((function e(){var t,n,a,r,s;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,"ROLE_ADMIN"!==he.roles[0]){e.next=8;break}return e.next=4,L.get("/gestione-ordine/todayOrder",{headers:w()});case 4:for(a in(n=e.sent).data)for(s in r=n.data[a])"totale"===s&&(t+=r.totale);n.data.push({_id:"TOTALE",qty:0,totale:t}),c(n.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(J.a,{onClick:function(){return function(){var e=(new Date).toISOString().slice(0,10);window.scrollTo(0,0);var t=new be.jsPDF;t.text("Report ordini per il giorno ".concat(e),5,15),t.autoTable({html:"#report",startY:25}),t.save("report_".concat(e,".pdf"))}()},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Y.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{id:"content",children:Object(a.jsxs)("table",{id:"report",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e._id,n=e.qty,r=e.totale,s=e.dataInserimento;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s})]},t)}))})]})}),Object(a.jsx)("br",{})]})},me=n(140),ge=n(27),pe=n(317),fe=n(141),xe=p.getCurrentUser(),ve=function(e){var t=Object(r.useState)([]),n=Object(T.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(),i=Object(T.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)(""),j=Object(T.a)(d,2),b=j[0],h=j[1];Object(r.useEffect)((function(){}),[e.trigRD]);var O=function(){var e=Object(te.a)(ee.a.mark((function e(t){var n,a,r,s,o;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,"ROLE_ADMIN"!==xe.roles[0]){e.next=8;break}return e.next=4,L.get("/gestione-ordine/dateOrder/".concat(t),{headers:w()});case 4:for(r in(a=e.sent).data)for(o in s=a.data[r])"totale"===o&&(n+=s.totale);a.data.push({_id:"TOTALE",qty:0,totale:n}),c(a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(H.a,{style:{backgroundColor:"#D4D4D4"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Inserire la data per il report"}),Object(a.jsx)(ge.a,{utils:me.a,children:Object(a.jsx)(pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline",inputVariant:"filled",onKeyPress:function(e){!function(e){e.preventDefault()}(e)},variant:"dialog",value:l,onChange:function(e){console.log(e),u(e);var t=Object(fe.a)(e,"yyyyMMdd");O(t),h("report_"+t)}})}),Object(a.jsx)(J.a,{onClick:function(){return function(){window.scrollTo(0,0);var e=new be.jsPDF;e.text("Report ordini per il giorno ".concat(b.substring(7,16)),5,15),e.autoTable({html:"#reportday",startY:25}),e.save("".concat(b,".pdf"))}()},size:"large",style:{"margin-top":"10px",display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Y.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{id:"contentday",children:Object(a.jsxs)("table",{id:"reportday",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e._id,n=e.qty,r=e.totale,s=e.dataInserimento;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s})]},t)}))})]})}),Object(a.jsx)("br",{})]})},ye=n(139),ke=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},Ce=function(e){if(!Object(ye.isEmail)(e))return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},Ne=function(e){if(e.length<3||e.length>20)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},Se=function(e){if(e.length<6||e.length>40)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},we=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleRegister=a.handleRegister.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",email:"",password:"",successful:!1,message:""},a}return Object(u.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&p.register(this.state.username,this.state.email,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0})}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:n})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(x.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t},children:[!this.state.successful&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[ke,Ne]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(y.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[ke,Ce]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(y.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[ke,Se]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(C.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(r.Component),Ie=Object(R.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function Pe(){var e=Ie(),t=Object(r.useState)(""),n=Object(T.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(0),i=Object(T.a)(o,2),l=i[0],u=i[1],d=Object(r.useState)("none"),j=Object(T.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)(0),m=Object(T.a)(O,2),g=m[0],f=m[1],x=Object(r.useState)(""),v=Object(T.a)(x,2),y=v[0],k=v[1],C=Object(r.useState)(!1),N=Object(T.a)(C,2),S=N[0],I=N[1],P=Object(r.useState)(!1),D=Object(T.a)(P,2),U=D[0],R=D[1],E=Object(r.useState)("none"),F=Object(T.a)(E,2),A=F[0],q=F[1],B=Object(r.useState)(!1),M=Object(T.a)(B,2),_=M[0],z=M[1],V=Object(r.useState)("none"),W=Object(T.a)(V,2),Z=W[0],ee=W[1],te=Object(r.useState)(!1),ne=Object(T.a)(te,2),ae=ne[0],re=ne[1],se=Object(r.useState)("none"),ce=Object(T.a)(se,2),oe=ce[0],le=ce[1],de=Object(r.useState)(!1),be=Object(T.a)(de,2),he=be[0],me=be[1],ge=Object(r.useState)("teal"),pe=Object(T.a)(ge,2),fe=pe[0],xe=pe[1];p.getCurrentUser();return Object(a.jsxs)("div",{children:[Object(a.jsx)(ie,{}),Object(a.jsx)(X.a,{control:Object(a.jsx)($.a,{checked:U,onChange:function(e){R(e.target.checked),e.target.checked?q("block"):q("none")},name:"checkedA",color:"primary"}),label:"Gestione prodotti"}),Object(a.jsxs)(G.a,{display:A,className:e.root,children:[Object(a.jsx)(ue,{trigP:U}),Object(a.jsx)("br",{}),Object(a.jsx)(H.a,{required:!0,label:"Descrizione",variant:"outlined",value:s,margin:"dense",type:"string",defaultValue:"",onChange:function(e){return c(e.target.value)}}),Object(a.jsx)(H.a,{required:!0,label:"Grammatura (gr)",variant:"outlined",value:l,margin:"dense",type:"number",defaultValue:"",onChange:function(e){return u(e.target.value)}}),Object(a.jsx)(H.a,{required:!0,label:"Peso Totale (gr)",variant:"outlined",value:g,margin:"dense",type:"number",defaultValue:"",onChange:function(e){return f(e.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)(J.a,{onClick:function(){return function(e,t,n){if(""!==e){var a={desc:e,grammatura:t,pesoTotale:n};L.post("gestione-ordini/prodotti/",a,{headers:w()}).then((function(e){200===e.status&&(xe("green"),k("Prodotto inserito!"),I(!0))})).catch((function(e){401===e.response.status?(xe("red"),k("La tua sessione \xe8 scaduta. Fai logout/login!"),I(!0)):403===e.response.status?(xe("red"),k("No token provided. Fai logout/login!"),I(!0)):(xe("red"),k(e.message),I(!0))}))}else k("Il prodotto non pu\xf2 essere vuoto..."),xe("orange"),I(!0)}(s,l,g)},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Y.a,{}),variant:"outlined",children:"Inserisci il prodotto"})]}),Object(a.jsx)("br",{}),Object(a.jsx)(X.a,{control:Object(a.jsx)($.a,{checked:_,onChange:function(e){z(e.target.checked),e.target.checked?h("block"):h("none")},name:"checkedB",color:"primary"}),label:"Elimina o crea nuovi utenti"}),Object(a.jsxs)(G.a,{display:b,className:e.root,children:[Object(a.jsx)(je,{trigU:_}),Object(a.jsx)(we,{})]}),Object(a.jsx)("br",{}),Object(a.jsx)(X.a,{control:Object(a.jsx)($.a,{checked:ae,onChange:function(e){re(e.target.checked),e.target.checked?ee("block"):ee("none")},name:"checkedC",color:"primary"}),label:"Report ordini"}),Object(a.jsx)(G.a,{display:Z,className:e.root,children:Object(a.jsx)(Oe,{trigR:ae})}),Object(a.jsx)("br",{}),Object(a.jsx)(X.a,{control:Object(a.jsx)($.a,{checked:he,onChange:function(e){me(e.target.checked),e.target.checked?le("block"):le("none")},name:"checkedD",color:"primary"}),label:"Report ordini per data"}),Object(a.jsx)(G.a,{display:oe,className:e.root,children:Object(a.jsx)(ve,{trigRD:he})}),Object(a.jsx)(K.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:S,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&I(!1)},children:Object(a.jsx)(Q.a,{style:{backgroundColor:fe},message:y})})]})}var De=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;P.getAdminBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)(Pe,{})}}]),n}(r.Component),Ue=n.p+"static/media/404-error-page-found.dcb2ff4c.jpg",Te=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{class:"container",children:[Object(a.jsx)("img",{src:Ue,alt:""}),Object(a.jsx)("h1",{style:{textAlign:"center"},children:Object(a.jsx)(i.b,{to:"/",children:"Go to Home "})})]})}}]),n}(s.a.Component),Le=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).logOut=a.logOut.bind(Object(d.a)(a)),a.state={showAdminBoard:!1,currentUser:void 0},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=p.getCurrentUser();e&&this.setState({currentUser:e,showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"logOut",value:function(){p.logout()}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.showAdminBoard;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-secondary",children:[Object(a.jsx)(i.b,{to:"/",className:"navbar-brand",children:"Gestione Ordini"}),Object(a.jsxs)("div",{className:"navbar-nav mr-auto",children:[n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/admin",className:"nav-link",children:"Admin"})}),t&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/user",className:"nav-link",children:"Ordini"})})]}),t?Object(a.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/profile",className:"nav-link",children:t.username})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/",className:"nav-link",onClick:this.logOut,children:"LogOut"})})]}):Object(a.jsx)("div",{className:"navbar-nav ml-auto",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/login",className:"nav-link",children:"Login"})})})]}),Object(a.jsx)("div",{className:"container mt-3",children:Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{exact:!0,path:["/","/home"],component:D}),Object(a.jsx)(h.b,{exact:!0,path:"/login",component:S}),Object(a.jsx)(h.b,{exact:!0,path:"/profile",component:U}),Object(a.jsx)(h.b,{path:"/user",component:ce}),Object(a.jsx)(h.b,{path:"/admin",component:De}),Object(a.jsx)(h.b,{path:"/404",component:Te}),Object(a.jsx)(h.a,{to:"/404"})]})})]})}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(Le,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,n){}},[[276,1,3]]]);
//# sourceMappingURL=main.7c3e91f2.chunk.js.map