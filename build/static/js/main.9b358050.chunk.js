(this["webpackJsonpc1-app-ordini-fe"]=this["webpackJsonpc1-app-ordini-fe"]||[]).push([[0],{277:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(0),r=n.n(o),s=n(17),c=n.n(s),i=n(27),l=n(21),d=n(22),u=n(33),m=n(37),j=n(36),g=n(19),b=(n(64),n(38)),p=n.n(b),O="https://c2-gestione-ordini.herokuapp.com/api/auth/",h=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"login",value:function(e,t){return p.a.post(O+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,n){return p.a.post(O+"signup",{username:e,email:t,password:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),x=n(88),v=n.n(x),f=n(68),R=n.n(f),y=n(89),C=n.n(y),k=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"log",value:function(e,t,n,a){return p.a.post("https://c2-gestione-ordini.herokuapp.com/logging/",{severity:e,username:t,page:n,text:a})}}]),e}()),N=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},w=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(u.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(u.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(u.a)(a)),a.state={username:"",password:"",loading:!1,message:""},a}return Object(d.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?h.login(this.state.username,this.state.password).then((function(){t.props.history.push("/"),window.location.reload(),console.log("INFO, ".concat(t.state.username,", login.component, user logged in"))}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:n}),k.log("ERROR",t.state.username,"login.component","login error ".concat(n)),console.log("ERROR, ".concat(t.state.username,", login.component, login error ").concat(n))})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("h5",{children:"Inserisci le credenziali"}),Object(a.jsxs)(v.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(R.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[N]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(R.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[N]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"btn btn-primary btn-block",disabled:this.state.loading,children:[this.state.loading&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(a.jsx)("span",{children:"Login"})]})}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(C.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(o.Component);function S(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var E="https://c2-gestione-ordini.herokuapp.com/api/test/",I=new(function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,[{key:"getPublicContent",value:function(){return p.a.get(E+"all")}},{key:"getUserBoard",value:function(){return p.a.get(E+"user",{headers:S()})}},{key:"getModeratorBoard",value:function(){return p.a.get(E+"mod",{headers:S()})}},{key:"getAdminBoard",value:function(){return p.a.get(E+"admin",{headers:S()})}}]),e}()),D=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;I.getPublicContent().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h6",{children:"Benvenuto. Gestisci i tuoi ordini da questa app!"})})})}}]),n}(o.Component),F=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={redirect:null,userReady:!1,currentUser:{username:""}},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=h.getCurrentUser();e||this.setState({redirect:"/"}),this.setState({currentUser:e,userReady:!0})}},{key:"render",value:function(){if(this.state.redirect)return Object(a.jsx)(g.a,{to:this.state.redirect});var e=this.state.currentUser;return Object(a.jsx)("div",{className:"container",children:this.state.userReady?Object(a.jsxs)("div",{children:[Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("strong",{children:e.username})," Profile"]})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(a.jsx)("strong",{children:"Authorities:"}),Object(a.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})]}):null})}}]),n}(o.Component),P=n(9),T=p.a.create({baseURL:"https://c2-gestione-ordini.herokuapp.com/",responseType:"json"}),U=n(304),M=n(318),z=n(319),L=n(308),B=n(317),q=n(316),A=n(320),_=n(312),K=n(41),V=n.n(K),H=n(321),W=n(313),G=n(306),Y=Object(U.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)}}}}));function J(){var e=Y();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(G.a,{})})}var Q=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function $(){var e=Q(),t=Object(o.useState)([]),n=Object(P.a)(t,2),r=n[0],s=n[1],c=Object(o.useState)([""]),i=Object(P.a)(c,2),l=i[0],d=i[1],u=Object(o.useState)("none"),m=Object(P.a)(u,2),j=m[0],g=m[1],b=Object(o.useState)("none"),p=Object(P.a)(b,2),O=p[0],x=p[1],v=Object(o.useState)(),f=Object(P.a)(v,2),R=f[0],y=f[1],C=Object(o.useState)(""),N=Object(P.a)(C,2),w=N[0],E=N[1],I=Object(o.useState)(!1),D=Object(P.a)(I,2),F=D[0],U=D[1],K=Object(o.useState)(""),G=Object(P.a)(K,2),Y=G[0],$=G[1],X=Object(o.useState)(),Z=Object(P.a)(X,2),ee=Z[0],te=Z[1],ne=Object(o.useState)(""),ae=Object(P.a)(ne,2),oe=ae[0],re=ae[1],se=Object(o.useState)(),ce=Object(P.a)(se,2),ie=ce[0],le=ce[1],de=Object(o.useState)("teal"),ue=Object(P.a)(de,2),me=ue[0],je=ue[1],ge=Object(o.useState)(!0),be=Object(P.a)(ge,2),pe=be[0],Oe=be[1],he=Object(o.useState)(!1),xe=Object(P.a)(he,2),ve=xe[0],fe=xe[1],Re=h.getCurrentUser();Object(o.useEffect)((function(){ye()}),[]);var ye=function(){T.get("gestione-ordini/prodotti",{headers:S()}).then((function(e){200===e.status&&(s(e.data),Oe(!1),console.log("INFO, ".concat(Re.username,", ordini.component, retrieveProduct() Call OK")))})).catch((function(e){"Network Error"===e.message?(Oe(!1),je("red"),E("Non sei connesso ad internet..."),U(!0)):401===e.response.status?(Oe(!1),je("red"),E("Sessione scaduta. Fai logout/login!"),U(!0),k.log("ERROR",Re.username,"ordini.component","retrieveProduct() Call KO ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, retrieveProduct() Call KO ").concat(e.message))):403===e.response.status?(Oe(!1),je("red"),E("No token provided. Fai logout/login!"),U(!0),k.log("ERROR",Re.username,"ordini.component","retrieveProduct() Call KO ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, retrieveProduct() Call KO ").concat(e.message))):(Oe(!1),je("red"),E(e.message),U(!0),k.log("ERROR",Re.username,"ordini.component","retrieveProduct() Call KO ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, retrieveProduct() Call KO ").concat(e.message)))}))};return pe?Object(a.jsx)(J,{}):Object(a.jsxs)("div",{children:[Object(a.jsxs)(q.a,{className:e.root,children:[Object(a.jsxs)(L.a,{className:e.formControl,children:[Object(a.jsx)(M.a,{id:"demo-simple-select-label",children:"Prodotti"}),Object(a.jsxs)(B.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l.desc,onChange:function(e){console.log("INFO, ".concat(Re.username,", ordini.component, handleChange() scelto prodotto ").concat(2===e.target.value?"Custom":e.target.value.desc)),2!==e.target.value?(d(e.target.value||""),g("block"),x("none"),te(""),re(""),$(""),le(""),y("")):(d(e.target.value||""),g("none"),x("block"),te(""),re(""),$(""),le(""),y(""))},children:[r&&r.map((function(e){return Object(a.jsx)(z.a,{value:e,children:e.desc},e.desc)})),Object(a.jsx)(z.a,{value:2,children:"Ordine personalizzato"},"custom")]})]}),Object(a.jsxs)(q.a,{display:j,className:e.root,children:[Object(a.jsx)(A.a,{label:"Prodotto",style:{backgroundColor:"#D4D4D4",margin:"10px"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:l.desc}),Object(a.jsx)(A.a,{label:"Grammatura (gr)",style:{backgroundColor:"#D4D4D4",margin:"10px"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:l.grammatura}),Object(a.jsx)(A.a,{label:"Peso Totale (gr)",style:{backgroundColor:"#D4D4D4",margin:"10px"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:R?l.pesoTotale*R:0}),Object(a.jsx)(A.a,{label:"Inserisci qui l'ordine",style:{margin:"10px"},margin:"none",onChange:function(e){return y(e.target.value)},value:R,type:"number",variant:"outlined",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(A.a,{label:"Note",style:{margin:"10px"},value:oe,onChange:function(e){return re(e.target.value)},margin:"none",type:"string",variant:"outlined"}),Object(a.jsx)(_.a,{onClick:function(){return function(e,t){if(0!==R&&""!==R){fe(!0);var n={desc:e.desc,seller:Re.username,pesoProdotto:e.pesoTotale,qty:R,note:t,isCustom:!1};T.post("gestione-ordini/ordine/",n,{headers:S()}).then((function(e){200===e.status&&(je("green"),E("Ordine inserito!"),U(!0),console.log("INFO, ".concat(Re.username,", ordini.component, handleClick inserito prodotto")))})).catch((function(e){401===e.response.status?(je("red"),E("La tua sessione \xe8 scaduta. Fai logout/login!"),U(!0),k.log("ERROR",Re.username,"ordini.component","handleClick errore ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, handleClick errore ").concat(e.message))):403===e.response.status?(je("red"),E("No token provided. Fai logout/login!"),U(!0),k.log("ERROR",Re.username,"ordini.component","handleClick errore ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, handleClick errore ").concat(e.message))):(je("red"),E(e.message),U(!0),k.log("ERROR",Re.username,"ordini.component","handleClick errore ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, handleClick errore ").concat(e.message)))}))}else je("orange"),E("L'ordine non pu\xf2 essere vuoto..."),U(!0)}(l,oe)},disabled:ve,size:"large",style:{display:"flex",backgroundColor:"#F35B04",alignItems:"center",justifyContent:"center",marginTop:"10px"},startIcon:Object(a.jsx)(V.a,{}),variant:"outlined",children:"Inserisci ordine"})]}),Object(a.jsxs)(q.a,{display:O,className:e.root,children:[Object(a.jsx)(A.a,{required:!0,value:Y,style:{margin:"10px"},margin:"none",onChange:function(e){return $(e.target.value)},type:"string",variant:"outlined",label:"Nome prodotto"}),Object(a.jsx)(A.a,{required:!0,value:ie,style:{margin:"10px"},margin:"none",onChange:function(e){return le(e.target.value)},type:"number",variant:"outlined",label:"Peso totale(gr)",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(A.a,{required:!0,value:ee,style:{margin:"10px"},margin:"none",onChange:function(e){return te(e.target.value)},type:"number",variant:"outlined",label:"Quantit\xe0(pezzi)",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(A.a,{value:oe,style:{margin:"10px"},margin:"none",onChange:function(e){return re(e.target.value)},type:"string",variant:"outlined",label:"Note"}),Object(a.jsx)(_.a,{onClick:function(){return function(e,t,n,a){if(0!==n&&""!==n&&""!==e&&0!==t){fe(!0);var o={desc:e,seller:Re.username,pesoProdotto:t,qty:n,note:a,isCustom:!0};T.post("gestione-ordini/ordine/",o,{headers:S()}).then((function(e){200===e.status&&(je("green"),E("Ordine custom inserito!"),U(!0),console.log("INFO, ".concat(Re.username,", ordini.component, handleCustomClick inserito prodotto")))})).catch((function(e){401===e.response.status?(je("red"),E("La tua sessione \xe8 scaduta. Fai logout/login!"),U(!0),k.log("ERROR",Re.username,"ordini.component","handleCustomClick errore ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, handleCustomClick errore ").concat(e.message))):403===e.response.status?(je("red"),E("No token provided. Fai logout/login!"),U(!0),k.log("ERROR",Re.username,"ordini.component","handleCustomClick errore ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, handleCustomClick errore ").concat(e.message))):(je("red"),E(e.message),U(!0),k.log("ERROR",Re.username,"ordini.component","handleCustomClick errore ".concat(e.message)),console.log("ERROR, ".concat(Re.username,", ordini.component, handleCustomClick errore ").concat(e.message)))}))}else je("orange"),E("Devi inserire tutti i campi obbligatori [Nome prodotto, Peso Totale, Quantit\xe0]"),U(!0)}(Y,ie,ee,oe)},disabled:ve,size:"large",style:{display:"flex",backgroundColor:"#F35B04",alignItems:"center",justifyContent:"center","margin-top":"10px"},startIcon:Object(a.jsx)(V.a,{}),variant:"outlined",children:"Inserisci ordine personalizzato"})]})]}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"center",horizontal:"center"},open:F,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&(U(!1),fe(!1))},children:Object(a.jsx)(W.a,{style:{backgroundColor:me},message:w})})]})}var X=n(53),Z=n.n(X),ee=n(72),te=n(314),ne=h.getCurrentUser(),ae=function(){var e=Object(o.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(""),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(o.useState)(!1),u=Object(P.a)(d,2),m=u[0],j=u[1],g=Object(o.useState)("teal"),b=Object(P.a)(g,2),p=b[0],O=b[1],h=Object(o.useState)(!0),x=Object(P.a)(h,2),v=x[0],f=x[1],R=Object(o.useState)(!1),y=Object(P.a)(R,2),C=y[0],N=y[1],w=Object(o.useState)(""),E=Object(P.a)(w,2),I=E[0],D=E[1];Object(o.useEffect)((function(){F()}),[]);var F=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"ROLE_ADMIN"!==ne.roles[0]){e.next=8;break}return e.next=4,T.get("/gestione-ordini/ordine/all",{headers:S()});case 4:0!==(t=e.sent).data.length?(r(t.data),f(!1),console.log("INFO, ".concat(ne.username,", ordini.table.component, getData all ordini"))):(N(!0),D("".concat(ne.username,", ancora non ci sono ordini per oggi")),console.log("INFO, ".concat(ne.username,", ordini.table.component, getData not today order yet"))),e.next=12;break;case 8:return e.next=10,T.get("/gestione-ordini/ordini/".concat(ne.username),{headers:S()});case 10:0!==(n=e.sent).data.length?(r(n.data),f(!1),console.log("INFO, ".concat(ne.username,", ordini.table.component, getData user ordini"))):(N(!0),D("".concat(ne.username,", ancora non ci sono ordini per oggi")),console.log("INFO, ".concat(ne.username,", ordini.table.component, getData not today order yet")));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),"Network Error"===e.t0.message?(f(!1),O("red"),l("Non sei connesso ad internet..."),j(!0)):401===e.t0.response.status?(f(!1),O("red"),l("Sessione scaduta. Fai logout/login!"),j(!0),k.log("ERROR",ne.username,"ordini.table.component","getData errore ".concat(e.t0.message)),console.log("ERROR , ".concat(ne.username,", ordini.table.component, getData errore ").concat(e.t0.message))):403===e.t0.response.status?(f(!1),O("red"),l("No token provided. Fai logout/login!"),j(!0),k.log("ERROR",ne.username,"ordini.table.component","getData errore ".concat(e.t0.message)),console.log("ERROR , ".concat(ne.username,", ordini.table.component, getData errore ").concat(e.t0.message))):(f(!1),O("red"),l(e.t0.message),j(!0),k.log("ERROR",ne.username,"ordini.table.component","getData errore ".concat(e.t0.message)),console.log("ERROR , ".concat(ne.username,", ordini.table.component, getData errore ").concat(e.t0.message)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return C?Object(a.jsx)(te.a,{variant:"h5",gutterBottom:!0,color:"textPrimary",children:I}):v?Object(a.jsx)(J,{}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{id:"ordini",style:{"margin-bottom":"2em"},children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","qty","peso totale","note","venditore",""].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:n&&n.map((function(e){var t=e.id,o=e.desc,s=e.qty,c=e.pesoTotale,i=e.note,l=e.seller;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:c}),Object(a.jsx)("td",{children:i}),Object(a.jsx)("td",{children:l}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){window.confirm("Vuoi davvero eliminare questo ordine?")&&T.delete("gestione-ordini/ordine/".concat(e),{headers:S()}).then((function(t){var a=n.filter((function(t){return e!==t.id}));r(a),console.log("INFO , ".concat(ne.username,", ordini.table.component, deleted order ").concat(e))}))}(t)},children:"Elimina"})})]},t)}))})]}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&j(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:p},message:i})})]})},oe=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function re(){var e=oe();return Object(a.jsx)("div",{children:Object(a.jsx)(q.a,{className:e.root,children:Object(a.jsx)(ae,{})})})}var se=h.getCurrentUser(),ce=function(){var e=Object(o.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(""),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(o.useState)(!1),u=Object(P.a)(d,2),m=u[0],j=u[1],g=Object(o.useState)("teal"),b=Object(P.a)(g,2),p=b[0],O=b[1],h=Object(o.useState)(!0),x=Object(P.a)(h,2),v=x[0],f=x[1];Object(o.useEffect)((function(){R()}),[]);var R=function(){T.get("/gestione-ordini/prodotti/",{headers:S()}).then((function(e){200===e.status&&"ROLE_ADMIN"===se.roles[0]&&(r(e.data),f(!1),console.log("INFO, ".concat(se.username,", admin.product.component, getData get dei prodotti")))})).catch((function(e){"Network Error"===e.message?(f(!1),O("red"),l("Non sei connesso ad internet..."),j(!0)):401===e.response.status?(f(!1),O("red"),l("Sessione scaduta. Fai logout/login!"),j(!0),k.log("ERROR",se.username,"admin.product.component","getData errore ".concat(e.message)),console.log("ERROR, ".concat(se.username,", admin.product.component, getData errore ").concat(e.message))):403===e.response.status?(f(!1),O("red"),l("No token provided. Fai logout/login!"),j(!0),k.log("ERROR",se.username,"admin.product.component","getData errore ".concat(e.message)),console.log("ERROR, ".concat(se.username,", admin.product.component, getData errore ").concat(e.message))):(f(!1),O("red"),l(e.message),j(!0),k.log("ERROR",se.username,"admin.product.component","getData errore ".concat(e.message)),console.log("ERROR, ".concat(se.username,", admin.product.component, getData errore ").concat(e.message)))}))};return v?Object(a.jsx)(J,{}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{id:"styled-table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","gr al pezzo","peso totale",""].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:n&&n.map((function(e){var t=e.id,o=e.desc,s=e.grammatura,c=e.pesoTotale;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:c}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){window.confirm("Vuoi davvero eliminare il prodotto?")&&T.delete("gestione-ordini/prodotto/".concat(e),{headers:S()}).then((function(t){var a=n.filter((function(t){return e!==t.id}));r(a),console.log("INFO, ".concat(se.username,", admin.product.component, removeData prodotto ").concat(e))}))}(t)},children:"Elimina"})})]},t)}))})]}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&j(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:p},message:i})})]})},ie=h.getCurrentUser(),le=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function de(){var e=le(),t=Object(o.useState)(""),n=Object(P.a)(t,2),r=n[0],s=n[1],c=Object(o.useState)(0),i=Object(P.a)(c,2),l=i[0],d=i[1],u=Object(o.useState)(0),m=Object(P.a)(u,2),j=m[0],g=m[1],b=Object(o.useState)(""),p=Object(P.a)(b,2),O=p[0],h=p[1],x=Object(o.useState)(!1),v=Object(P.a)(x,2),f=v[0],R=v[1],y=Object(o.useState)("teal"),C=Object(P.a)(y,2),N=C[0],w=C[1];return Object(a.jsxs)("div",{children:[Object(a.jsxs)(q.a,{className:e.root,children:[Object(a.jsx)(ce,{}),Object(a.jsx)(A.a,{required:!0,label:"Descrizione",variant:"outlined",value:r,margin:"none",type:"string",defaultValue:"",onChange:function(e){return s(e.target.value)},style:{margin:"20px"}}),Object(a.jsx)(A.a,{required:!0,label:"Grammatura (gr)",variant:"outlined",value:l,margin:"none",type:"number",defaultValue:"",onChange:function(e){return d(e.target.value)},InputProps:{inputProps:{min:0}},style:{margin:"20px"}}),Object(a.jsx)(A.a,{required:!0,label:"Peso Totale (gr)",variant:"outlined",value:j,margin:"none",type:"number",defaultValue:"",onChange:function(e){return g(e.target.value)},InputProps:{inputProps:{min:0}},style:{margin:"20px"}}),Object(a.jsx)(_.a,{onClick:function(){return function(e,t,n){if(""!==e){var a={desc:e,grammatura:t,pesoTotale:n};T.post("gestione-ordini/prodotti/",a,{headers:S()}).then((function(e){200===e.status&&(w("green"),h("Prodotto inserito!"),R(!0),console.log("INFO, ".concat(ie.username,", admin.gestioneprodotti.component, handleProductClick inserito prodotto")))})).catch((function(e){401===e.response.status?(w("red"),h("La tua sessione \xe8 scaduta. Fai logout/login!"),R(!0),console.log("ERROR, ".concat(ie.username,", admin.gestioneprodotti.component, handleProductClick errore ").concat(e.message)),k.log("ERROR",ie.username,"admin.gestioneprodotti.component","handleProductClick errore ".concat(e.message))):403===e.response.status?(w("red"),h("No token provided. Fai logout/login!"),R(!0),console.log("ERROR, ".concat(ie.username,", admin.gestioneprodotti.component, handleProductClick errore ").concat(e.message)),k.log("ERROR",ie.username,"admin.gestioneprodotti.component","handleProductClick errore ".concat(e.message))):(w("red"),h(e.message),R(!0),console.log("ERROR, ".concat(ie.username,", admin.gestioneprodotti.component, handleProductClick errore ").concat(e.message)),k.log("ERROR",ie.username,"admin.gestioneprodotti.component","handleProductClick errore ".concat(e.message)))}))}else h("Il prodotto non pu\xf2 essere vuoto..."),w("orange"),R(!0)}(r,l,j)},size:"large",style:{display:"flex",backgroundColor:"#F35B04",alignItems:"center",justifyContent:"center",margin:"20px"},startIcon:Object(a.jsx)(V.a,{}),variant:"outlined",children:"Inserisci nuovo prodotto"})]}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&R(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:N},message:O})})]})}var ue=h.getCurrentUser(),me=function(){var e=Object(o.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)("teal"),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(o.useState)(""),u=Object(P.a)(d,2),m=u[0],j=u[1],g=Object(o.useState)(!1),b=Object(P.a)(g,2),p=b[0],O=b[1],h=Object(o.useState)(!0),x=Object(P.a)(h,2),v=x[0],f=x[1];Object(o.useEffect)((function(){R()}),[]);var R=function(){T.get("/api/user/findUser",{headers:S()}).then((function(e){200===e.status&&"ROLE_ADMIN"===ue.roles[0]&&(r(e.data),f(!1),console.log("INFO, ".concat(ue.username,", admin.users.component, getData all users")))})).catch((function(e){"Network Error"===e.message?(f(!1),l("red"),j("Non sei connesso ad internet..."),O(!0)):401===e.response.status?(f(!1),l("red"),j("Sessione scaduta. Fai logout/login!"),O(!0),k.log("ERROR",ue.username,"admin.users.component","getData errore ".concat(e.message)),console.log("ERROR, ".concat(ue.username,", admin.users.component, getData errore ").concat(e.message))):403===e.response.status?(f(!1),l("red"),j("No token provided. Fai logout/login!"),O(!0),k.log("ERROR",ue.username,"admin.users.component","getData errore ".concat(e.message)),console.log("ERROR, ".concat(ue.username,", admin.users.component, getData errore ").concat(e.message))):(f(!1),l("red"),j(e.message),O(!0),k.log("ERROR",ue.username,"admin.users.component","getData errore ".concat(e.message)),console.log("ERROR, ".concat(ue.username,", admin.users.component, getData errore ").concat(e.message)))}))};return v?Object(a.jsx)(J,{}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("table",{id:"styled-table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["username","email",""].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:n&&n.map((function(e){var t=e.id,o=e.username,s=e.email;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){e===ue.username?(j("Non puoi rimuovere te stesso..."),l("orange"),O(!0)):window.confirm("Vuoi davvero eliminare l'utente?")&&T.delete("api/user/deleteUser/".concat(e),{headers:S()}).then((function(t){var a=n.filter((function(t){return e!==t.username}));r(a),console.log("INFO, ".concat(ue.username,", admin.users.component, removeData user ").concat(e))}))}(o)},children:"Elimina"})})]},t)}))})]}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:p,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&O(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:i},message:m})})]})},je=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function ge(){var e=je();return Object(a.jsx)("div",{children:Object(a.jsx)(q.a,{className:e.root,children:Object(a.jsx)(me,{})})})}var be=n(141),pe=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},Oe=function(e){if(!Object(be.isEmail)(e))return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},he=function(e){if(e.length<3||e.length>20)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},xe=function(e){if(e.length<6||e.length>40)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},ve=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleRegister=a.handleRegister.bind(Object(u.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(u.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(u.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(u.a)(a)),a.state={username:"",email:"",password:"",successful:!1,message:""},a}return Object(d.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&h.register(this.state.username,this.state.email,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0}),console.log('INFO, "NO USER", register.component, register registrato nuovo utente '.concat(t.state.username))}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:n}),console.log("ERROR, NO USER, register.component, register errore in registrazione ".concat(n)),k.log("ERROR","NO USER","register.component","register errore in registrazione ".concat(n))}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("h5",{children:"Inserisci un nuovo utente"}),Object(a.jsxs)(v.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t},children:[!this.state.successful&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(R.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[pe,he]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(R.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[pe,Oe]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(R.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[pe,xe]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("button",{className:"btn btn-primary btn-block",children:"Registra"})})]}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(C.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(o.Component),fe=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function Re(){var e=fe();return Object(a.jsx)("div",{children:Object(a.jsx)(q.a,{className:e.root,children:Object(a.jsx)(ve,{})})})}var ye=n(65),Ce=(n(109),n(30)),ke=n(16),Ne=Ce.b.Toast,we=h.getCurrentUser(),Se=function(){var e=Object(o.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(""),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(o.useState)(!1),u=Object(P.a)(d,2),m=u[0],j=u[1],g=Object(o.useState)("teal"),b=Object(P.a)(g,2),p=b[0],O=b[1],h=Object(o.useState)(!0),x=Object(P.a)(h,2),v=x[0],f=x[1];Object(o.useEffect)((function(){R()}),[]);var R=function(){var e=0;T.get("/gestione-ordine/todayOrder",{headers:S()}).then((function(t){if(200===t.status&&"ROLE_ADMIN"===we.roles[0]){for(var n in t.data){var a=t.data[n];for(var o in a)"totale"===o&&(e+=a.totale)}t.data.push({_id:"TOTALE",qty:0,totale:e}),r(t.data),f(!1),console.log("INFO, ".concat(we.username,", admin.report.component, getData todayOrder"))}})).catch((function(e){"Network Error"===e.message?(f(!1),O("red"),l("Non sei connesso ad internet..."),j(!0)):401===e.response.status?(f(!1),O("red"),l("Sessione scaduta. Fai logout/login!"),j(!0),console.log("ERROR, ".concat(we.username,", admin.report.component, getData error ").concat(e.message)),k.log("ERROR",we.username,"admin.report.component","getData errore ".concat(e.message))):403===e.response.status?(f(!1),O("red"),l("No token provided. Fai logout/login!"),j(!0),console.log("ERROR, ".concat(we.username,", admin.report.component, getData error ").concat(e.message)),k.log("ERROR",we.username,"admin.report.component","getData errore ".concat(e.message))):(f(!1),O("red"),l(e.message),j(!0),console.log("ERROR, ".concat(we.username,", admin.report.component, getData error ").concat(e.message)),k.log("ERROR",we.username,"admin.report.component","getData errore ".concat(e.message)))}))};return v?Object(a.jsx)(J,{}):Object(a.jsxs)("div",{children:[Object(a.jsx)(_.a,{onClick:function(){return function(){var e=(new Date).toISOString().slice(0,10),t=new ye.jsPDF;t.text("Report ordini per il giorno ".concat(e),10,15),t.autoTable({html:"#report",startY:25});var n=btoa(t.output());ke.isChrome||ke.isFirefox||ke.isSafari||ke.isOpera||ke.isIE||ke.isEdge||ke.isYandex||ke.isChromium||ke.isMobileSafari?(t.save("report_".concat(e,".pdf")),console.log("INFO, ".concat(we.username,", admin.report.component, handleReportClick download from browser")),k.log("INFO",we.username,"admin.report.component","handleReportClick download from browser")):(Ce.b.Filesystem.writeFile({path:"report_".concat(e,".pdf"),data:n,directory:Ce.a.Documents,recursive:!0}),Ne.show({text:"Download report_".concat(e,".pdf in ").concat(Ce.a.Documents),position:"center",duration:"long"}),console.log("INFO, ".concat(we.username,", admin.report.component, handleReportClick download from mobile")),k.log("INFO",we.username,"admin.report.component","handleReportClick download from mobile"))}()},size:"large",style:{display:"flex",backgroundColor:"#F35B04",alignItems:"center",justifyContent:"center","margin-top":"10px"},startIcon:Object(a.jsx)(V.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{id:"content",children:Object(a.jsxs)("table",{id:"report",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:n&&n.map((function(e){var t=e._id,n=e.qty,o=e.totale,r=e.dataInserimento;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:r})]},t)}))})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&j(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:p},message:i})})]})},Ee=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function Ie(){var e=Ee();return Object(a.jsx)("div",{children:Object(a.jsx)(q.a,{className:e.root,children:Object(a.jsx)(Se,{})})})}var De=n(61),Fe=n(26),Pe=n(315),Te=n(143),Ue=Ce.b.Toast,Me=h.getCurrentUser(),ze=function(){var e=Object(o.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(o.useState)(""),u=Object(P.a)(d,2),m=u[0],j=u[1],g=Object(o.useState)(""),b=Object(P.a)(g,2),p=b[0],O=b[1],h=Object(o.useState)(!1),x=Object(P.a)(h,2),v=x[0],f=x[1],R=Object(o.useState)("teal"),y=Object(P.a)(R,2),C=y[0],N=y[1],w=Object(o.useState)(!1),E=Object(P.a)(w,2),I=E[0],D=E[1],F=Object(o.useState)(!1),U=Object(P.a)(F,2),M=U[0],z=U[1],L=Object(o.useState)(!0),B=Object(P.a)(L,2),q=B[0],K=B[1],G=Object(o.useState)(""),Y=Object(P.a)(G,2),Q=Y[0],$=Y[1];Object(o.useEffect)((function(){}),[q,M]);var X=function(e){l(e);var t=Object(Te.a)(e,"yyyyMMdd");K(!1),z(!0),ne(t),j("report_"+t),D(!0)},ne=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a,o,s,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=0,e.next=4,T.get("/gestione-ordine/dateOrder/".concat(t),{headers:S()});case 4:if(0!==(a=e.sent).data.length){for(o in a.data)for(c in s=a.data[o])"totale"===c&&(n+=s.totale);a.data.push({_id:"TOTALE",qty:0,totale:n}),r(a.data),z(!1),K(!1),console.log("INFO, ".concat(Me.username,", admin.customReport.component, getData dateOrder"))}else K(!0),$("".concat(Me.username,", non ci sono ordini per la data selezionata")),console.log("INFO, ".concat(Me.username,", admin.ordini.table.component, getData not today order yet"));e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"Network Error"===e.t0.message?(z(!1),N("red"),O("Non sei connesso ad internet..."),f(!0)):401===e.t0.response.status?(z(!1),N("red"),O("Sessione scaduta. Fai logout/login!"),f(!0),console.log("ERROR, ".concat(Me.username,", admin.customReport.component, getData error ").concat(e.t0.message)),k.log("ERROR",Me.username,"admin.customReport.component","getData errore ".concat(e.t0.message))):403===e.t0.response.status?(z(!1),N("red"),O("No token provided. Fai logout/login!"),f(!0),console.log("ERROR, ".concat(Me.username,", admin.customReport.component, getData error ").concat(e.t0.message)),k.log("ERROR",Me.username,"admin.customReport.component","getData errore ".concat(e.t0.message))):(z(!1),N("red"),O(e.t0.message),f(!0),console.log("ERROR, ".concat(Me.username,", admin.customReport.component, getData error ").concat(e.t0.message)),k.log("ERROR",Me.username,"admin.customReport.component","getData errore ".concat(e.t0.message)));case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){return e.preventDefault(),!1};return q?Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(A.a,{style:{backgroundColor:"#6d6c6c"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Scegli la data"}),Object(a.jsx)(Fe.a,{utils:De.a,children:Object(a.jsx)(Pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline-custom",inputVariant:"filled",onKeyPress:function(e){ae(e)},variant:"dialog",value:i,onChange:X})}),Object(a.jsx)(te.a,{variant:"h5",gutterBottom:!0,color:"textPrimary",children:Q})]}):M?Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(A.a,{style:{backgroundColor:"#6d6c6c"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Scegli la data"}),Object(a.jsx)(Fe.a,{utils:De.a,children:Object(a.jsx)(Pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline-custom",inputVariant:"filled",onKeyPress:function(e){ae(e)},variant:"dialog",value:i,onChange:X})}),Object(a.jsx)(J,{})]}):Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(A.a,{style:{backgroundColor:"#6d6c6c"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Scegli la data"}),Object(a.jsx)(Fe.a,{utils:De.a,children:Object(a.jsx)(Pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline-custom",inputVariant:"filled",onKeyPress:function(e){ae(e)},variant:"dialog",value:i,onChange:X})}),Object(a.jsx)(_.a,{onClick:function(){return function(){var e=new ye.jsPDF;e.text("Report ordini per il giorno ".concat(m.substring(7,16)),10,15),e.autoTable({html:"#reportday",startY:25});var t=btoa(e.output());ke.isChrome||ke.isFirefox||ke.isSafari||ke.isOpera||ke.isIE||ke.isEdge||ke.isYandex||ke.isChromium||ke.isMobileSafari?(e.save("".concat(m,".pdf")),console.log("INFO, ".concat(Me.username,", admin.customReport.component, handleReportClick download from browser")),k.log("INFO",Me.username,"admin.customReport.component","handleReportClick download from browser")):(Ce.b.Filesystem.writeFile({path:"".concat(m,".pdf"),data:t,directory:Ce.a.Documents,recursive:!0}),Ue.show({text:"Download ".concat(m,".pdf in ").concat(Ce.a.Documents),position:"center",duration:"long"}),console.log("INFO, ".concat(Me.username,", admin.customReport.component, handleReportClick download from mobile")),k.log("INFO",Me.username,"admin.customReport.component","handleReportClick download from mobile"))}()},size:"large",style:{display:"flex",backgroundColor:"#F35B04",alignItems:"center",justifyContent:"center","margin-top":"10px"},startIcon:Object(a.jsx)(V.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("br",{}),I&&Object(a.jsx)("div",{id:"contentday",children:Object(a.jsxs)("table",{id:"reportday",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:n&&n.map((function(e){var t=e._id,n=e.qty,o=e.totale,r=e.dataInserimento;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:r})]},t)}))})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:v,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&f(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:C},message:p})})]})},Le=Ce.b.Toast,Be=h.getCurrentUser(),qe=function(){var e=Object(o.useState)([]),t=Object(P.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(),c=Object(P.a)(s,2),i=c[0],l=c[1],d=Object(o.useState)(""),u=Object(P.a)(d,2),m=u[0],j=u[1],g=Object(o.useState)(""),b=Object(P.a)(g,2),p=b[0],O=b[1],h=Object(o.useState)(!1),x=Object(P.a)(h,2),v=x[0],f=x[1],R=Object(o.useState)("teal"),y=Object(P.a)(R,2),C=y[0],N=y[1],w=Object(o.useState)(!1),E=Object(P.a)(w,2),I=E[0],D=E[1],F=Object(o.useState)(!1),U=Object(P.a)(F,2),M=U[0],z=U[1],L=Object(o.useState)(!0),B=Object(P.a)(L,2),q=B[0],K=B[1],G=Object(o.useState)(""),Y=Object(P.a)(G,2),Q=Y[0],$=Y[1];Object(o.useEffect)((function(){}),[q,M]);var X=function(e){l(e);var t=Object(Te.a)(e,"yyyyMMdd");K(!1),z(!0),ne(t),j("report_full_"+t),D(!0)},ne=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get("/gestione-ordine/allOrder/".concat(t),{headers:S()});case 3:0!==(n=e.sent).data.length?(r(n.data),z(!1),K(!1),console.log("INFO, ".concat(Be.username,", admin.ordini.table.component, getData allOrder"))):(K(!0),$("".concat(Be.username,", non ci sono ordini per la data selezionata")),console.log("INFO, ".concat(Be.username,", admin.ordini.table.component, getData not today order yet"))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),"Network Error"===e.t0.message?(z(!1),N("red"),O("Non sei connesso ad internet..."),f(!0)):401===e.t0.response.status?(z(!1),N("red"),O("Sessione scaduta. Fai logout/login!"),f(!0),k.log("ERROR",Be.username,"admin.ordini.table.component","getData errore ".concat(e.t0.message)),console.log("ERROR , ".concat(Be.username,", admin.ordini.table.component, getData errore ").concat(e.t0.message))):403===e.t0.response.status?(z(!1),N("red"),O("No token provided. Fai logout/login!"),f(!0),k.log("ERROR",Be.username,"admin.ordini.table.component","getData errore ".concat(e.t0.message)),console.log("ERROR , ".concat(Be.username,", admin.ordini.table.component, getData errore ").concat(e.t0.message))):(z(!1),N("red"),O(e.t0.message),f(!0),k.log("ERROR",Be.username,"admin.ordini.table.component","getData errore ".concat(e.t0.message)),console.log("ERROR , ".concat(Be.username,", admin.ordini.table.component, getData errore ").concat(e.t0.message)));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){return e.preventDefault(),!1};return q?Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(A.a,{style:{backgroundColor:"#6d6c6c"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Scegli la data"}),Object(a.jsx)(Fe.a,{utils:De.a,children:Object(a.jsx)(Pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline",inputVariant:"filled",onKeyPress:function(e){ae(e)},variant:"dialog",value:i,onChange:X})}),Object(a.jsx)("br",{}),Object(a.jsx)(te.a,{variant:"h5",gutterBottom:!0,color:"textPrimary",children:Q})]}):M?Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(A.a,{style:{backgroundColor:"#6d6c6c"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Scegli la data"}),Object(a.jsx)(Fe.a,{utils:De.a,children:Object(a.jsx)(Pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline",inputVariant:"filled",onKeyPress:function(e){ae(e)},variant:"dialog",value:i,onChange:X})}),Object(a.jsx)(J,{})]}):Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(A.a,{style:{backgroundColor:"#6d6c6c"},InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Scegli la data"}),Object(a.jsx)(Fe.a,{utils:De.a,children:Object(a.jsx)(Pe.a,{InputProps:{readOnly:!0},format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline",inputVariant:"filled",onKeyPress:function(e){ae(e)},variant:"dialog",value:i,onChange:X})}),Object(a.jsx)(_.a,{onClick:function(){return function(){var e=new ye.jsPDF;e.text("Report ordini per il giorno ".concat(m.substring(12,20)),10,15),e.autoTable({html:"#reportdaysingle",startY:25});var t=btoa(e.output());ke.isChrome||ke.isFirefox||ke.isSafari||ke.isOpera||ke.isIE||ke.isEdge||ke.isYandex||ke.isChromium||ke.isMobileSafari?(e.save("".concat(m,".pdf")),console.log("INFO, ".concat(Be.username,", admin.ordini.table.component, handleReportClick download from browser")),k.log("INFO",Be.username,"admin.ordini.table.component","handleReportClick download from browser")):(Ce.b.Filesystem.writeFile({path:"".concat(m,".pdf"),data:t,directory:Ce.a.Documents,recursive:!0}),Le.show({text:"Download ".concat(m,".pdf in ").concat(Ce.a.Documents),position:"center",duration:"long"}),console.log("INFO, ".concat(Be.username,", admin.ordini.table.component, handleReportClick download from mobile")),k.log("INFO",Be.username,"admin.ordini.table.component","handleReportClick download from mobile"))}()},size:"large",style:{display:"flex",backgroundColor:"#F35B04",alignItems:"center",justifyContent:"center","margin-top":"10px"},startIcon:Object(a.jsx)(V.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("br",{}),I&&Object(a.jsx)("div",{id:"contentdaysingle",children:Object(a.jsxs)("table",{id:"reportdaysingle",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento","venditore","note"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:n&&n.map((function(e){var t=e._id,n=e.desc,o=e.qty,r=e.pesoTotale,s=e.dataInserimento,c=e.seller,i=e.note;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s}),Object(a.jsx)("td",{children:c}),Object(a.jsx)("td",{children:i})]},t)}))})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:v,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&f(!1)},children:Object(a.jsx)(W.a,{style:{backgroundColor:C},message:p})})]})},Ae=Object(U.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function _e(){var e=Ae();return Object(a.jsxs)("div",{children:[Object(a.jsx)(te.a,{variant:"h5",gutterBottom:!0,color:"textPrimary",children:"Report per data"}),Object(a.jsx)(q.a,{className:e.root,children:Object(a.jsx)(ze,{})}),Object(a.jsx)(te.a,{variant:"h5",gutterBottom:!0,color:"textPrimary",children:"Report per singolo ordine"}),Object(a.jsx)(q.a,{className:e.root,children:Object(a.jsx)(qe,{})})]})}var Ke=n.p+"static/media/404-error-page-found.dcb2ff4c.jpg",Ve=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{class:"container",children:[Object(a.jsx)("img",{src:Ke,alt:""}),Object(a.jsx)("h1",{style:{textAlign:"center"},children:Object(a.jsx)(i.b,{to:"/",children:"Go to Home "})})]})}}]),n}(r.a.Component),He=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).logOut=a.logOut.bind(Object(u.a)(a)),a.state={showAdminBoard:!1,currentUser:void 0},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=h.getCurrentUser();e&&this.setState({currentUser:e,showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"logOut",value:function(){h.logout(),this.setState({currentUser:void 0,showAdminBoard:!1})}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.showAdminBoard;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("nav",{className:"navbar navbar-fixed-top",children:[Object(a.jsx)("button",{className:"navbar-toggler navbar-left",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent1","aria-controls":"navbarSupportedContent1","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon",children:Object(a.jsx)("i",{className:"fa-1x"})})}),Object(a.jsx)("span",{className:"navbar-text",children:t?t.username:"Benvenuto"}),Object(a.jsx)("ul",{class:"nav navbar-nav flex-row justify-content-md-right justify-content-start flex-nowrap text-right",children:t?Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/login",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",onClick:this.logOut,children:"Disconnetti"})}):Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/login",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Accedi"})})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent1",children:Object(a.jsxs)("ul",{className:"navbar-nav",children:[n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/admin/prodotti",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Gestione prodotti"})}),n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/admin/users",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Gestione utenti"})}),n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/admin/new",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Inserimento utenti"})}),n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/admin/report/oggi",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Report di oggi"})}),n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/admin/report/altri",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Altri report"})}),t&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/user/ordine",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Inserisci ordine"})}),t&&!n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/user/recap",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Rivedi il tuo Ordine"})}),t&&n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(i.b,{to:"/user/recap",className:"nav-link","data-toggle":"collapse","data-target":".navbar-collapse.show",children:"Modifica l'ordine di oggi"})})]})})]}),Object(a.jsx)("div",{className:"container mt-3",children:Object(a.jsxs)(g.d,{children:[Object(a.jsx)(g.b,{exact:!0,path:["/","/home"],component:D}),Object(a.jsx)(g.b,{exact:!0,path:"/login",component:w}),Object(a.jsx)(g.b,{exact:!0,path:"/profile",component:F}),Object(a.jsx)(g.b,{path:"/user/ordine",component:$}),Object(a.jsx)(g.b,{path:"/user/recap",component:re}),Object(a.jsx)(g.b,{path:"/admin/prodotti",component:de}),Object(a.jsx)(g.b,{path:"/admin/users",component:ge}),Object(a.jsx)(g.b,{path:"/admin/new",component:Re}),Object(a.jsx)(g.b,{path:"/admin/report/oggi",component:Ie}),Object(a.jsx)(g.b,{path:"/admin/report/altri",component:_e}),Object(a.jsx)(g.b,{path:"/404",component:Ve}),Object(a.jsx)(g.a,{to:"/404"})]})})]})}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(He,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,n){}},[[277,1,3]]]);
//# sourceMappingURL=main.9b358050.chunk.js.map