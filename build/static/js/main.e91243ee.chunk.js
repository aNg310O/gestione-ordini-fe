(this["webpackJsonpapp-ordini-fe"]=this["webpackJsonpapp-ordini-fe"]||[]).push([[0],{177:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),s=n(16),c=n.n(s),o=n(45),i=n(21),l=n(22),d=n(32),u=n(28),j=n(27),b=n(18),h=(n(176),n(177),n(44)),O=n.n(h),m="http://localhost:8081/api/auth/",g=new(function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"login",value:function(e,t){return O.a.post(m+"signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("user")}},{key:"register",value:function(e,t,n){return O.a.post(m+"signup",{username:e,email:t,password:n})}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),f=n(82),p=n.n(f),x=n(61),v=n.n(x),y=n(83),k=n.n(y),C=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},N=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleLogin=a.handleLogin.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",password:"",loading:!1,message:""},a}return Object(l.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleLogin",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",loading:!0}),this.form.validateAll(),0===this.checkBtn.context._errors.length?g.login(this.state.username,this.state.password).then((function(){t.props.history.push("/profile"),window.location.reload()}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({loading:!1,message:n})})):this.setState({loading:!1})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(p.a,{onSubmit:this.handleLogin,ref:function(t){e.form=t},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(v.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[C]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(v.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[C]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("button",{className:"btn btn-primary btn-block",disabled:this.state.loading,children:[this.state.loading&&Object(a.jsx)("span",{className:"spinner-border spinner-border-sm"}),Object(a.jsx)("span",{children:"Login"})]})}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(k.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(r.Component);function S(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}var w="http://localhost:8081/api/test/",I=new(function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"getPublicContent",value:function(){return O.a.get(w+"all")}},{key:"getUserBoard",value:function(){return O.a.get(w+"user",{headers:S()})}},{key:"getModeratorBoard",value:function(){return O.a.get(w+"mod",{headers:S()})}},{key:"getAdminBoard",value:function(){return O.a.get(w+"admin",{headers:S()})}}]),e}()),P=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;I.getPublicContent().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsx)("h3",{children:this.state.content})})})}}]),n}(r.Component),U=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={redirect:null,userReady:!1,currentUser:{username:""}},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=g.getCurrentUser();e||this.setState({redirect:"/home"}),this.setState({currentUser:e,userReady:!0})}},{key:"render",value:function(){if(this.state.redirect)return Object(a.jsx)(b.a,{to:this.state.redirect});var e=this.state.currentUser;return Object(a.jsx)("div",{className:"container",children:this.state.userReady?Object(a.jsxs)("div",{children:[Object(a.jsx)("header",{className:"jumbotron",children:Object(a.jsxs)("h3",{children:[Object(a.jsx)("strong",{children:e.username})," Profile"]})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Token:"})," ",e.accessToken.substring(0,20)," ..."," ",e.accessToken.substr(e.accessToken.length-20)]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Id:"})," ",e.id]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Email:"})," ",e.email]}),Object(a.jsx)("strong",{children:"Authorities:"}),Object(a.jsx)("ul",{children:e.roles&&e.roles.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})]}):null})}}]),n}(r.Component),D=n(12),T=O.a.create({baseURL:"http://localhost:8081/",responseType:"json"}),R=n(307),E=n(309),L=n(311),B=n(281),A=n(312),q=n(87),M=n.n(q),_=Object(R.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function z(){var e=_();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(E.a,{position:"static",children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(A.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(M.a,{})}),Object(a.jsx)(B.a,{variant:"h6",className:e.title,children:"Pagina ordini"})]})})})}var G=n(324),F=n(325),V=n(314),J=n(321),H=n(320),W=n(326),Y=n(318),K=n(51),Q=n.n(K),$=n(322),X=n(323),Z=n(313),ee=n(35),te=n.n(ee),ne=n(53),ae=(n(72),g.getCurrentUser()),re=function(e){var t=Object(r.useState)([]),n=Object(D.a)(t,2),s=n[0],c=n[1];Object(r.useEffect)((function(){o()}),[e.trig]);var o=function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ROLE_ADMIN"!==ae.roles[0]){e.next=7;break}return e.next=3,T.get("/gestione-ordini/ordine/all",{headers:S()});case 3:t=e.sent,c(t.data),e.next=11;break;case 7:return e.next=9,T.get("/gestione-ordini/ordini/".concat(ae.username),{headers:S()});case 9:n=e.sent,c(n.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{id:"ordini",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["data inserimento","venditore","desc","qty","peso totale","note","operation"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e.id,n=e.desc,r=e.qty,o=e.pesoTotale,i=e.dataInserimento,l=e.seller,d=e.note;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:i}),Object(a.jsx)("td",{children:l}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{children:d}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){T.delete("gestione-ordini/ordine/".concat(e),{headers:S()}).then((function(t){var n=s.filter((function(t){return e!==t.id}));c(n)}))}(t)},children:"Delete"})})]},t)}))})]})})},se=Object(R.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function ce(){var e=se(),t=Object(r.useState)([]),n=Object(D.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)([""]),i=Object(D.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)("none"),j=Object(D.a)(u,2),b=j[0],h=j[1],O=Object(r.useState)("none"),m=Object(D.a)(O,2),f=m[0],p=m[1],x=Object(r.useState)(0),v=Object(D.a)(x,2),y=v[0],k=v[1],C=Object(r.useState)(""),N=Object(D.a)(C,2),w=N[0],I=N[1],P=Object(r.useState)(!1),U=Object(D.a)(P,2),R=U[0],E=U[1],L=Object(r.useState)(""),B=Object(D.a)(L,2),A=B[0],q=B[1],M=Object(r.useState)(0),_=Object(D.a)(M,2),K=_[0],ee=_[1],te=Object(r.useState)(""),ne=Object(D.a)(te,2),ae=ne[0],ce=ne[1],oe=Object(r.useState)(0),ie=Object(D.a)(oe,2),le=ie[0],de=ie[1],ue=Object(r.useState)(!1),je=Object(D.a)(ue,2),be=je[0],he=je[1],Oe=Object(r.useState)("none"),me=Object(D.a)(Oe,2),ge=me[0],fe=me[1],pe=Object(r.useState)(!1),xe=Object(D.a)(pe,2),ve=xe[0],ye=xe[1],ke=Object(r.useState)("none"),Ce=Object(D.a)(ke,2),Ne=Ce[0],Se=Ce[1],we=g.getCurrentUser();Object(r.useEffect)((function(){Ie()}),[""]);var Ie=function(){T.get("gestione-ordini/prodotti",{headers:S()}).then((function(e){c(e.data)})).catch((function(e){console.log(e)}))},Pe=function(e,t){"clickaway"!==t&&E(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(z,{}),Object(a.jsx)(Z.a,{control:Object(a.jsx)(X.a,{checked:be,onChange:function(e){he(e.target.checked),e.target.checked?fe("block"):fe("none")},name:"checkedA",color:"primary"}),label:"Inserisci ordini"}),Object(a.jsxs)(H.a,{display:ge,className:e.root,children:[Object(a.jsxs)(V.a,{className:e.formControl,children:[Object(a.jsx)(G.a,{id:"demo-simple-select-label",children:"Prodotti"}),Object(a.jsxs)(J.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l.desc,onChange:function(e){2!==e.target.value?(d(e.target.value||""),h("block"),p("none"),ee(0),ce(""),q(""),de(0),k(0)):(d(e.target.value||""),h("none"),p("block"),ee(0),ce(""),q(""),de(0),k(0))},children:[s&&s.map((function(e){return Object(a.jsx)(F.a,{value:e,children:e.desc},e.desc)})),Object(a.jsx)(F.a,{value:2,children:"Custom"},"custom")]})]}),Object(a.jsxs)(H.a,{display:b,className:e.root,children:[Object(a.jsx)(W.a,{label:"Prodotto",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"filled",value:l.desc}),Object(a.jsx)(W.a,{label:"Grammatura (gr)",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"filled",value:l.grammatura}),Object(a.jsx)(W.a,{label:"Peso Totale (gr)",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"filled",value:l.pesoTotale*y}),Object(a.jsx)(W.a,{margin:"dense",onChange:function(e){return k(e.target.value)},value:y,type:"number",defaultValue:"0",variant:"outlined",label:"Inserisci qui l'ordine",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(W.a,{label:"Note",value:ae,onChange:function(e){return ce(e.target.value)},margin:"dense",type:"string",defaultValue:"",variant:"outlined"}),Object(a.jsx)(Y.a,{onClick:function(){return function(e,t){if(0!==y){var n={desc:e.desc,seller:we.username,pesoProdotto:e.pesoTotale,qty:y,note:t,isCustom:!1};T.post("gestione-ordini/ordine/",n,{headers:S()}).then((function(e){200===e.status&&(I("Ordine inserito!"),E(!0))})).catch((function(e){I(e.message),E(!0)}))}else I("L'ordine non pu\xf2 essere vuoto..."),E(!0)}(l,ae)},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Q.a,{}),variant:"outlined",children:"Inserisci l'ordine"})]}),Object(a.jsxs)(H.a,{display:f,className:e.root,children:[Object(a.jsx)(W.a,{required:!0,value:A,margin:"dense",onChange:function(e){return q(e.target.value)},type:"string",defaultValue:"",variant:"outlined",label:"Nome prodotto"}),Object(a.jsx)(W.a,{required:!0,value:le,margin:"dense",onChange:function(e){return de(e.target.value)},type:"number",defaultValue:"0",variant:"outlined",label:"Peso totale(gr)",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(W.a,{required:!0,value:K,margin:"dense",onChange:function(e){return ee(e.target.value)},type:"number",defaultValue:"0",variant:"outlined",label:"Quantit\xe0(pezzi)",InputProps:{inputProps:{min:0}}}),Object(a.jsx)(W.a,{value:ae,margin:"dense",onChange:function(e){return ce(e.target.value)},type:"string",defaultValue:"",variant:"outlined",label:"Note"}),Object(a.jsx)(Y.a,{onClick:function(){return function(e,t,n,a){if(0!==n){var r={desc:e,seller:we.username,pesoProdotto:t,qty:n,note:a,isCustom:!0};T.post("gestione-ordini/ordine/",r,{headers:S()}).then((function(e){200===e.status&&(I("Ordine custom inserito!"),E(!0))})).catch((function(e){I(e.message),E(!0)}))}else I("L'ordine non pu\xf2 essere vuoto..."),E(!0)}(A,le,K,ae)},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Q.a,{}),variant:"outlined",children:"Inserisci l'ordine personalizzato"})]})]}),Object(a.jsx)($.a,{anchorOrigin:{vertical:"top",horizontal:"center"},message:w,open:R,autoHideDuration:3500,onClose:Pe,style:{backgroundColor:"green",color:"black"}}),Object(a.jsx)($.a,{anchorOrigin:{vertical:"top",horizontal:"center"},message:w,open:R,autoHideDuration:3500,onClose:Pe,style:{backgroundColor:"green",color:"black"}}),Object(a.jsx)("br",{}),Object(a.jsx)(Z.a,{control:Object(a.jsx)(X.a,{checked:ve,onChange:function(e){ye(e.target.checked),e.target.checked?Se("block"):Se("none")},name:"checkedB",color:"primary"}),label:"Rivedi/modifica l'ordine inserito"}),Object(a.jsx)(H.a,{display:Ne,className:e.root,children:Object(a.jsx)(re,{trig:ve})})]})}var oe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;I.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)(ce,{})}}]),n}(r.Component),ie=Object(R.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function le(){var e=ie();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(E.a,{position:"static",children:Object(a.jsxs)(L.a,{children:[Object(a.jsx)(A.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(M.a,{})}),Object(a.jsx)(B.a,{variant:"h6",className:e.title,children:"Admin Dashboard"})]})})})}n(80);var de=g.getCurrentUser(),ue=function(e){var t=Object(r.useState)([]),n=Object(D.a)(t,2),s=n[0],c=n[1];Object(r.useEffect)((function(){o()}),[e.trigP]);var o=function(){T.get("/gestione-ordini/prodotti/",{headers:S()}).then((function(e){200===e.status?"ROLE_ADMIN"===de.roles[0]&&c(e.data):401===e.status&&console.log("Token scaduto!")})).catch((function(e){401===e.response.status&&(console.log(e),g.logout())}))};return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{id:"styled-table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","grammatura","peso totale","operation"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e.id,n=e.desc,r=e.grammatura,o=e.pesoTotale;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:o}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){T.delete("gestione-ordini/prodotto/".concat(e),{headers:S()}).then((function(t){var n=s.filter((function(t){return e!==t.id}));c(n)}))}(t)},children:"Delete"})})]},t)}))})]})})},je=g.getCurrentUser(),be=function(e){var t=Object(r.useState)([]),n=Object(D.a)(t,2),s=n[0],c=n[1];Object(r.useEffect)((function(){o()}),[e.trigU]);var o=function(){var e=Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ROLE_ADMIN"!==je.roles[0]){e.next=5;break}return e.next=3,T.get("/api/user/findUser",{headers:S()});case 3:200===(t=e.sent).status?c(t.data):401===t.status&&console.log("Token scaduto!");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)("table",{id:"users",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["username","email","operation"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e.id,n=e.username,r=e.email;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{className:"operation",children:Object(a.jsx)("button",{className:"button",onClick:function(){return function(e){T.delete("api/user/deleteUser/".concat(e),{headers:S()}).then((function(t){var n=s.filter((function(t){return e!==t.username}));c(n)}))}(n)},children:"Delete"})})]},t)}))})]})})},he=n(74),Oe=n(75),me=(n(127),g.getCurrentUser()),ge=function(e){var t=Object(r.useState)([]),n=Object(D.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(0),i=Object(D.a)(o,2),l=i[0],d=i[1];Object(r.useEffect)((function(){u()}),[e.trigR]);var u=function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,a,r,s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,"ROLE_ADMIN"!==me.roles[0]){e.next=9;break}return e.next=4,T.get("/gestione-ordine/todayOrder",{headers:S()});case 4:for(a in(n=e.sent).data)for(s in r=n.data[a])"totale"===s&&(t+=r.totale);n.data.push({_id:"TOTALE",qty:0,totale:t}),c(n.data),d(Object.keys(n.data).length);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(Y.a,{onClick:function(){return function(){var e,t=(new Date).toISOString().slice(0,10);e=l>19?["210","594"]:["210","297"],console.log(e),window.scrollTo(0,0);var n=document.getElementById("content",{scrollY:-window.scrollY});Oe(n).then((function(n){var a=n.toDataURL("image/png"),r=new he.jsPDF({orientation:"p",unit:"mm",format:e});r.text("Report ordini per il giorno ".concat(t),5,10),r.addImage(a,"JPEG",6,25),r.save("report_".concat(t,".pdf"))}))}()},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Q.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("div",{id:"content",children:Object(a.jsxs)("table",{id:"report",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e._id,n=e.qty,r=e.totale,s=e.dataInserimento;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s})]},t)}))})]})})]})},fe=n(141),pe=n(25),xe=n(319),ve=n(142),ye=g.getCurrentUser(),ke=function(e){var t=Object(r.useState)([]),n=Object(D.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(),i=Object(D.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)(""),j=Object(D.a)(u,2),b=j[0],h=j[1],O=Object(r.useState)(0),m=Object(D.a)(O,2),g=m[0],f=m[1];Object(r.useEffect)((function(){}),[e.trigRD]);var p=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a,r,s,o;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,"ROLE_ADMIN"!==ye.roles[0]){e.next=9;break}return e.next=4,T.get("/gestione-ordine/dateOrder/".concat(t),{headers:S()});case 4:for(r in(a=e.sent).data)for(o in s=a.data[r])"totale"===o&&(n+=s.totale);a.data.push({_id:"TOTALE",qty:0,totale:n}),c(a.data),f(Object.keys(a.data).length);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{id:"root-content",children:[Object(a.jsx)(W.a,{InputLabelProps:{shrink:!0},InputProps:{readOnly:!0},variant:"outlined",value:"Inserire la data per il report"}),Object(a.jsx)(pe.a,{utils:fe.a,children:Object(a.jsx)(xe.a,{format:"yyyyMMdd",disableFuture:!0,id:"date-picker-inline",inputVariant:"filled",variant:"dialog",value:l,onChange:function(e){d(e);var t=Object(ve.a)(e,"yyyyMMdd");p(t),h("report_"+t)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(a.jsx)(Y.a,{onClick:function(){return function(){var e;e=g>19?["210","594"]:["210","297"],console.log(e),window.scrollTo(0,0);var t=document.getElementById("content",{scrollY:-window.scrollY});Oe(t).then((function(t){var n=t.toDataURL("image/png"),a=new he.jsPDF({orientation:"p",unit:"mm",format:e});a.text("Report ordini per il giorno ".concat(b),5,10),a.addImage(n,"JPEG",6,25),a.save("".concat(b,".pdf"))}))}()},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Q.a,{}),variant:"outlined",children:"Download Report"}),Object(a.jsx)("div",{id:"content",children:Object(a.jsxs)("table",{id:"report",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:["desc","quantit\xe0","peso totale (gr)","data inserimento"].map((function(e,t){return Object(a.jsx)("th",{children:e.toUpperCase()},t)}))})}),Object(a.jsx)("tbody",{children:s&&s.map((function(e){var t=e._id,n=e.qty,r=e.totale,s=e.dataInserimento;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t}),Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{children:r}),Object(a.jsx)("td",{children:s})]},t)}))})]})})]})},Ce=n(140),Ne=function(e){if(!e)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This field is required!"})},Se=function(e){if(!Object(Ce.isEmail)(e))return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"This is not a valid email."})},we=function(e){if(e.length<3||e.length>20)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The username must be between 3 and 20 characters."})},Ie=function(e){if(e.length<6||e.length>40)return Object(a.jsx)("div",{className:"alert alert-danger",role:"alert",children:"The password must be between 6 and 40 characters."})},Pe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleRegister=a.handleRegister.bind(Object(d.a)(a)),a.onChangeUsername=a.onChangeUsername.bind(Object(d.a)(a)),a.onChangeEmail=a.onChangeEmail.bind(Object(d.a)(a)),a.onChangePassword=a.onChangePassword.bind(Object(d.a)(a)),a.state={username:"",email:"",password:"",successful:!1,message:""},a}return Object(l.a)(n,[{key:"onChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleRegister",value:function(e){var t=this;e.preventDefault(),this.setState({message:"",successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&g.register(this.state.username,this.state.email,this.state.password).then((function(e){t.setState({message:e.data.message,successful:!0})}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();t.setState({successful:!1,message:n})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsxs)("div",{className:"card card-container",children:[Object(a.jsx)("img",{src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",alt:"profile-img",className:"profile-img-card"}),Object(a.jsxs)(p.a,{onSubmit:this.handleRegister,ref:function(t){e.form=t},children:[!this.state.successful&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)(v.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[Ne,we]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)(v.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[Ne,Se]})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)(v.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[Ne,Ie]})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("button",{className:"btn btn-primary btn-block",children:"Sign Up"})})]}),this.state.message&&Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert",children:this.state.message})}),Object(a.jsx)(k.a,{style:{display:"none"},ref:function(t){e.checkBtn=t}})]})]})})}}]),n}(r.Component),Ue=Object(R.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2),root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}}));function De(){var e=Ue(),t=Object(r.useState)(""),n=Object(D.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(0),i=Object(D.a)(o,2),l=i[0],d=i[1],u=Object(r.useState)("none"),j=Object(D.a)(u,2),b=j[0],h=j[1],O=Object(r.useState)(0),m=Object(D.a)(O,2),g=m[0],f=m[1],p=Object(r.useState)(""),x=Object(D.a)(p,2),v=x[0],y=x[1],k=Object(r.useState)(!1),C=Object(D.a)(k,2),N=C[0],w=C[1],I=Object(r.useState)(!1),P=Object(D.a)(I,2),U=P[0],R=P[1],E=Object(r.useState)("none"),L=Object(D.a)(E,2),B=L[0],A=L[1],q=Object(r.useState)(!1),M=Object(D.a)(q,2),_=M[0],z=M[1],G=Object(r.useState)("none"),F=Object(D.a)(G,2),V=F[0],J=F[1],K=Object(r.useState)(!1),ee=Object(D.a)(K,2),te=ee[0],ne=ee[1],ae=Object(r.useState)("none"),re=Object(D.a)(ae,2),se=re[0],ce=re[1],oe=Object(r.useState)(!1),ie=Object(D.a)(oe,2),de=ie[0],je=ie[1],he=function(e,t){"clickaway"!==t&&w(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(le,{}),Object(a.jsx)(Z.a,{control:Object(a.jsx)(X.a,{checked:U,onChange:function(e){R(e.target.checked),e.target.checked?A("block"):A("none")},name:"checkedA",color:"primary"}),label:"Gestione prodotti"}),Object(a.jsxs)(H.a,{display:B,className:e.root,children:[Object(a.jsx)(ue,{trigP:U}),Object(a.jsx)(W.a,{required:!0,label:"Descrizione",variant:"outlined",value:s,margin:"dense",type:"string",defaultValue:"",onChange:function(e){return c(e.target.value)}}),Object(a.jsx)(W.a,{required:!0,label:"Grammatura (gr)",variant:"outlined",value:l,margin:"dense",type:"number",defaultValue:"",onChange:function(e){return d(e.target.value)}}),Object(a.jsx)(W.a,{required:!0,label:"Peso Totale (gr)",variant:"outlined",value:g,margin:"dense",type:"number",defaultValue:"",onChange:function(e){return f(e.target.value)}}),Object(a.jsx)(Y.a,{onClick:function(){return function(e,t,n){if(""!==e){var a={desc:e,grammatura:t,pesoTotale:n};T.post("gestione-ordini/prodotti/",a,{headers:S()}).then((function(e){200===e.status?(y("Prodotto inserito!"),w(!0)):401===e.status&&(y("Latua sessione \xe8 scaduta. Fai logout/login!"),w(!0))})).catch((function(e){y(e.message),w(!0)}))}else y("Il prodotto non pu\xf2 essere vuoto..."),w(!0)}(s,l,g)},size:"large",style:{display:"flex",backgroundColor:"#3f51b5",alignItems:"center",justifyContent:"center"},startIcon:Object(a.jsx)(Q.a,{}),variant:"outlined",children:"Inserisci il prodotto"})]}),Object(a.jsx)("br",{}),Object(a.jsx)(Z.a,{control:Object(a.jsx)(X.a,{checked:_,onChange:function(e){z(e.target.checked),e.target.checked?h("block"):h("none")},name:"checkedB",color:"primary"}),label:"Elimina o crea nuovi utenti"}),Object(a.jsxs)(H.a,{display:b,className:e.root,children:[Object(a.jsx)(be,{trigU:_}),Object(a.jsx)(Pe,{})]}),Object(a.jsx)("br",{}),Object(a.jsx)(Z.a,{control:Object(a.jsx)(X.a,{checked:te,onChange:function(e){ne(e.target.checked),e.target.checked?J("block"):J("none")},name:"checkedC",color:"primary"}),label:"REPORT ORDINI OGGI"}),Object(a.jsx)(H.a,{display:V,className:e.root,children:Object(a.jsx)(ge,{trigR:te})}),Object(a.jsx)("br",{}),Object(a.jsx)(Z.a,{control:Object(a.jsx)(X.a,{checked:de,onChange:function(e){je(e.target.checked),e.target.checked?ce("block"):ce("none")},name:"checkedD",color:"primary"}),label:"REPORT ORDINI"}),Object(a.jsx)(H.a,{display:se,className:e.root,children:Object(a.jsx)(ke,{trigRD:de})}),Object(a.jsx)($.a,{anchorOrigin:{vertical:"top",horizontal:"center"},message:v,open:N,autoHideDuration:3500,onClose:he,style:{backgroundColor:"green",color:"black"}}),Object(a.jsx)($.a,{anchorOrigin:{vertical:"top",horizontal:"center"},message:v,open:N,autoHideDuration:3500,onClose:he,style:{backgroundColor:"green",color:"black"}})]})}var Te=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;I.getAdminBoard().then((function(t){e.setState({content:t.data})}),(function(t){e.setState({content:t.response&&t.response.data&&t.response.data.message||t.message||t.toString()})}))}},{key:"render",value:function(){return Object(a.jsx)(De,{})}}]),n}(r.Component),Re=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).logOut=a.logOut.bind(Object(d.a)(a)),a.state={showAdminBoard:!1,currentUser:void 0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=g.getCurrentUser();e&&this.setState({currentUser:e,showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"logOut",value:function(){g.logout()}},{key:"render",value:function(){var e=this.state,t=e.currentUser,n=e.showAdminBoard;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(a.jsx)(o.b,{to:"/",className:"navbar-brand",children:"Gestione Ordini"}),Object(a.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(o.b,{to:"/home",className:"nav-link",children:"Home"})}),n&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(o.b,{to:"/admin",className:"nav-link",children:"Admin Board"})}),t&&Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(o.b,{to:"/user",className:"nav-link",children:"User"})})]}),t?Object(a.jsxs)("div",{className:"navbar-nav ml-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(o.b,{to:"/profile",className:"nav-link",children:t.username})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)("a",{href:"/login",className:"nav-link",onClick:this.logOut,children:"LogOut"})})]}):Object(a.jsx)("div",{className:"navbar-nav ml-auto",children:Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(o.b,{to:"/login",className:"nav-link",children:"Login"})})})]}),Object(a.jsx)("div",{className:"container mt-3",children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:["/","/home"],component:P}),Object(a.jsx)(b.b,{exact:!0,path:"/login",component:N}),Object(a.jsx)(b.b,{exact:!0,path:"/profile",component:U}),Object(a.jsx)(b.b,{path:"/user",component:oe}),Object(a.jsx)(b.b,{path:"/admin",component:Te})]})})]})}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(a.jsx)(o.a,{children:Object(a.jsx)(Re,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,n){},80:function(e,t,n){}},[[279,1,3]]]);
//# sourceMappingURL=main.e91243ee.chunk.js.map